<!DOCTYPE html>
 <html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="https://www.thymeleaf.org"
        xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity3"
        xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layout/layout1}">
<body>
<th:block layout:fragment="style1">
	<style>
		.hideDelete {
			display: none;
		}
		._1n81at5 {
		    font-size: var(--dls19-pdp-listing-title-size, 26) !important;
		    line-height: var(--dls19-pdp-listing-title-line-height, 30px) !important;
		    font-weight: var(--dls19-pdp-listing-title-weight, 600) !important;
		    word-break: break-word !important;
		}
		._fecoyn4 {
		    font-size: 3em !important;
		    font-weight: inherit !important;
		    line-height: inherit !important;
		    margin: 0px !important;
		    padding: 0px !important;
		    display: inline !important;
		}
		._1qdp1ym {
		    -webkit-box-pack: justify !important;
		    -webkit-box-align: end !important;
		    align-items: flex-end !important;
		    display: flex !important;
		    justify-content: space-between !important;
		    padding-bottom: 50px;
	    }
	    ._544wcx {
		    display: flex !important;
		    flex-wrap: wrap !important;
		    margin-top: 4px !important;
		}
		._fardlj {
		    -webkit-box-align: center !important;
		    min-width: 0px !important;
		    margin-top: 8px !important;
		    align-items: center !important;
		    display: inline-flex !important;
		}
		._hyestb {
		    -webkit-box-align: center !important;
		    align-items: center !important;
		    color: var(--dls19-brand-color) !important;
		    display: inline-flex !important;
		    margin-right: 4px !important;
		    min-width: 14px !important;
		}
		._1ne5r4rt {
		    line-height: 20px !important;
		    max-height: 20px !important;
		    overflow: hidden !important;
		    text-overflow: ellipsis !important;
		    display: -webkit-box !important;
		    -webkit-line-clamp: 1 !important;
		    -webkit-box-orient: vertical !important;
		    color: rgb(34, 34, 34) !important;
		    font-family: Circular, -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif !important;
		    font-size: 14px !important;
		    position: relative !important;
		    font-weight: 600 !important;
		    overflow: clip !important;
		}
		._142pbzop {
		    font-family: Circular, -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif !important;
		    font-size: 14px !important;
		    line-height: 20px !important;
		    padding-left: 4px !important;
		    color: rgb(113, 113, 113) !important;
		    font-weight: 600 !important;
		    text-decoration: underline !important;
		}
		._17wfx63m {
		    cursor: pointer !important;
		    position: relative !important;
		    touch-action: manipulation !important;
		    font-family: inherit !important;
		    font-size: inherit !important;
		    line-height: inherit !important;
		    font-weight: inherit !important;
		    border-radius: 0px !important;
		    outline: none !important;
		    transition: box-shadow 0.2s ease 0s, -ms-transform 0.1s ease 0s, -webkit-transform 0.1s ease 0s, transform 0.1s ease 0s !important;
		    -webkit-tap-highlight-color: transparent !important;
		    background: transparent !important;
		    border: none !important;
		    color: inherit !important;
		    display: block !important;
		    margin: 0px !important;
		    padding: 0px !important;
		    text-align: inherit !important;
		    text-decoration: none !important;
		    height: 100% !important;
		    width: 100% !important;
		}
		._5oadh0 {
		    color: rgb(113, 113, 113) !important;
		    font-family: Circular, -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif !important;
		    font-weight: 400 !important;
		    margin: 8px 8px 0px !important;
		}
		._8tbpu3 {
		    font-family: Airmoji_Standalone !important;
		    font-weight: normal !important;
		    color: 1px red;
		}
		._63km3vu {
		    line-height: 20px !important;
		    max-height: 20px !important;
		    overflow: hidden !important;
		    text-overflow: ellipsis !important;
		    display: -webkit-box !important;
		    -webkit-line-clamp: 1 !important;
		    -webkit-box-orient: vertical !important;
		    font-family: Circular, -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif !important;
		    font-weight: 400 !important;
		    font-size: 14px !important;
		    position: relative !important;
		    color: rgb(113, 113, 113) !important;
		    overflow: clip !important;
		}
		
		._pbq7fmm {
		    line-height: 20px !important;
		    max-height: 20px !important;
		    overflow: hidden !important;
		    text-overflow: ellipsis !important;
		    display: -webkit-box !important;
		    -webkit-line-clamp: 1 !important;
		    -webkit-box-orient: vertical !important;
		    font-family: Circular, -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif !important;
		    font-size: 14px !important;
		    position: relative !important;
		    color: rgb(113, 113, 113) !important;
		    font-weight: 600 !important;
		    text-decoration: underline !important;
		    overflow: clip !important;
		}
		
		._88xxct {
		    display: block !important;
		}
		._y4w03w {
		    height: 28px !important;
		}
		._1jdtwz4 {
		    -webkit-box-pack: end !important;
		    display: flex !important;
		    justify-content: flex-end !important;
		}
		._c2acbp {
		    margin-right: 20px !important;
		}
		._kvaiv9k {
		    cursor: pointer !important;
		    display: inline-block !important;
		    margin: 0px -8px !important;
		    position: relative !important;
		    text-align: center !important;
		    width: auto !important;
		    touch-action: manipulation !important;
		    font-family: Circular, -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif !important;
		    font-size: 14px !important;
		    line-height: 18px !important;
		    font-weight: 600 !important;
		    border-radius: 8px !important;
		    outline: none !important;
		    padding: 8px !important;
		    transition: box-shadow 0.2s ease 0s, -ms-transform 0.1s ease 0s, -webkit-transform 0.1s ease 0s, transform 0.1s ease 0s !important;
		    -webkit-tap-highlight-color: transparent !important;
		    border: none !important;
		    background: transparent !important;
		    color: rgb(34, 34, 34) !important;
		    text-decoration: underline !important;
		}
		._5kaapu {
		    -webkit-box-align: center !important;
		    display: flex !important;
		    align-items: center !important;
		}
		._14tkmhr {
		    margin-right: 8px !important;
		}
		.image-box {
		    width:380px;
		    text-align: center;
		    overflow:hidden;
		    margin:0 auto;
		    padding-right: 50px;
		}
		
		.image-thumbnail {
		    width:100%;
		    height:100%;
		    object-fit:cover;
		}
		
		#like_button {
			display: inline-block;
			color: #cca2a3;
			cursor: pointer;
			font-size: 15px;
			-webkit-transition: all 0.1s ease-in-out;
			        transition: all 0.1s ease-in-out;
		}
		
		#like_button.liked {
			font-size: 0px;
		}
		
		#like_button:after {
			content: "♥";
			color: #D61F12;
			opacity: 0;
			-webkit-transition: all 0.2s ease-in-out;
			        transition: all 0.2s ease-in-out;
		}
		
		#like_button.liked:after {
			font-size: 15px;
			opacity: 1;
		}
		
		#like {
			padding: 15px;
		}
		
		._9ofhsl {
		    height: 100% !important;
		    width: 100% !important;
		    position: static !important;
		}
		._1c81x67 {
		    background: rgb(221, 221, 221) !important;
		    overflow: hidden !important;
		    position: relative !important;
		}
		.dir.r1are2x1 {
		    margin-bottom: 32px;
		}
		.dir.chnzxuf {
		    margin-bottom: 12px;
		}
		.s189e1ab {
		    display: -webkit-box;
		    display: -webkit-flex;
		    display: -ms-flexbox;
		    display: flex;
		    -webkit-align-items: baseline;
		    -webkit-box-align: baseline;
		    -ms-flex-align: baseline;
		    align-items: baseline;
		}
		.s11wgnhd {
		    color: "#717171";
		    font-weight: normal;
		}
		.dir-ltr.t9gtck5 {
		    margin-left: 12px;
		}
		.t9gtck5 {
		    color: black;
		    font-weight: bold;
		}
		.chnzxuf {
		    display: -webkit-box;
		    display: -webkit-flex;
		    display: -ms-flexbox;
		    display: flex;
		    -webkit-align-items: center;
		    -webkit-box-align: center;
		    -ms-flex-align: center;
		    align-items: center;
		}
		.modal-content{
			overflow-y: initial !important
		}
		.modal-body{
			height: 500px;
			overflow-y: auto;
		}
		._14i3z6h {
		    color: inherit !important;
		    font-weight: bold;
		    line-height: inherit !important;
		    padding: 0px !important;
		    margin-bottom: 20px;
		}
		._1d35qey {
		    color: black;
		    display: inline-flex !important;
		    margin-right: 8px !important;
		}
	</style>
</th:block>
<div class="panel panel-default" layout:fragment="content1">
	<section class="hero-wrap hero-wrap-2 js-fullheight" style="background-image: url('/bootstrap/images/item/itemdetail.jpg');">
			<div class="overlay"></div>
			<div class="container">
				<div
					class="row no-gutters slider-text js-fullheight align-items-end justify-content-center">
					<div class="col-md-9 ftco-animate pb-5 text-center">
						<p class="breadcrumbs">
							<span class="mr-2"><a th:href="@{/index}">Home <i class="fa fa-chevron-right"></i></a></span> <span>Item Detail<i class="fa fa-chevron-right"></i></span>
						</p>
						<h1 class="mb-0 bread">Item Detail</h1>
					</div>
				</div>
			</div>
		</section>

	<!-- 물건 정보조회 -->
	<section class="ftco-section services-section">
		<div class="container">
			<div class="_b8stb0">
				<span class="_1n81at5">
					<h1 tabindex="-1" class="_fecoyn4" th:text="${item.iTitle}"></h1>
				</span>
				<span style="margin-left:30px">
					<img width="100px" height="90px" th:if="${item.iTstate.title}=='대여가능'" th:src="@{/bootstrap/images/item/available.png}">
					<img width="100px" height="90px" th:if="${item.iTstate.title}!='대여가능'" th:src="@{/bootstrap/images/item/na.png}">
				</span>
			</div>
			<div class="_1qdp1ym">
				<div class="_544wcx">
					<span class="_fardlj">
						<span class="_hyestb">
							<span style="color:red">★</span>
							<span class="_1ne5r4rt" aria-hidden="true">[[${review_avg}]]</span>
						</span>
						<span class="_142pbzop">
							<button type="button" class="_17wfx63m">(후기 [[${item_review.size}]]개)</button>
						</span>
					</span>
					<span class="_5oadh0" aria-hidden="true">·</span>
					<span class="_fardlj">
						<span class="_hyestb">
							<span class="_8tbpu3" style="color:red" aria-hidden="true">▶</span>
						</span>
						<span aria-hidden="false" class="_63km3vu">슈퍼호스트</span>
					</span>
					<span class="_5oadh0" aria-hidden="true">·</span>
					<span class="_fardlj">
						<button type="button" class="_17wfx63m">
							<span class="_pbq7fmm" aria-hidden="false" th:text="${item_owner.mAddress.memberAddress1}"></span>
						</button>
					</span>
				</div>
				<div class="_88xxct">
					<div class="_y4w03w">
						<div class="_1jdtwz4">
							<div class="_c2acbp">
								<button type="button" class="_kvaiv9k">
									<div class="_5kaapu"><span class="_14tkmhr"><svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="presentation" focusable="false" style="display: block; fill: none; height: 16px; width: 16px; stroke: currentcolor; stroke-width: 2; overflow: visible;"><g fill="none"><path d="M27 18v9a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-9"></path><path d="M16 3v23V3z"></path><path d="M6 13l9.293-9.293a1 1 0 0 1 1.414 0L26 13"></path></g></svg></span>공유하기</div>
								</button>
							</div>
							<div>
								<button aria-label="목록에 숙소 추가하기" data-testid="pdp-save-button-unsaved" type="button" class="_kvaiv9k">
									<div aria-hidden="true" class="_5kaapu">
										<span id="like_button">♥</span>
										<span id="like_num">[[${like_num}]]</span>
									</div>
								</button>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="">
				<div class="col-md-6 order-md-last heading-section pl-md-5 ftco-animate d-flex align-items-center">
					<div class="image-box">
						<img class="image-thumbnail" th:src="${item.photos[0].ipFilename}"/>
						<input type="button" style="margin-top:10px;" class="btn btn-secondary py-3 px-4" th:value="모두보기" id="showPhotos" data-toggle="modal" data-target="#photoModal"> 
					</div>
					<div class="w-100">
						<p style="color: black" th:text="${item.iContent}"></p>
						<p style="color: black">
							<span style="padding-right: 15px">물건 상태:</span>
							<span th:text="${item.iState.title}" style="color:green"></span>
						</p>
						<p style="color: black">
							<span style="padding-right: 15px">가격:</span><span style="font-size: 30px; font-style: bold; color: black;" th:text="${item.iPrice}"></span><span style="padding-right: 30px">원/1day</span>
						</p>	
					</div>
				</div>
			</div>
			<div align="right" style="margin-top: 20px">
				<form id='reserve' th:action="@{|/trade/reserveForm/${item.iId}|}" method="get">
					<input type="hidden" name='page' th:value=${pagevo.page}> 
			    	<input type='hidden' name='size' th:value=${pagevo.size}> 
					<input type="hidden" name="itemName" th:value="${pagevo.itemName}">	
					<input type="hidden" name="itemSort" th:value="${pagevo.itemSort}">	
					<input type="hidden" name="startDate" th:value="${pagevo.startDate}">	
					<input type="hidden" name="endDate" th:value="${pagevo.endDate}">	
					<input type="hidden" name="priceLimit" th:value="${pagevo.priceLimit}">	
					
					<input type="submit" class="btn btn-primary py-3 px-4" value="예약하기">
				</form>
			</div>
		</div>
		
		<!-- Modal -->
		<div id="photoModal" class="modal fade" role="dialog">
			<div class="modal-dialog">
	    		<!-- Modal content-->
				<div class="modal-content">
					<div class="modal-header">
			        	<h4 class="modal-title">item photos</h4>
			        	<button type="button" class="close" data-dismiss="modal">&times;</button>
			      	</div>
			      	<div class="modal-body">
			      		<div class="container">
							<div class="row d-flex">
								<div class="col-md-12 ftco-animate" th:each="photo:${item.photos}">
									<div class="blog-entry justify-content-end">
										<img width="100%" height="100%" th:src="@{${photo.ipFilename}}">
									</div>
			        			</div>
			        		</div>
			        	</div>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
					</div>
			    </div>
			</div>
		</div>
	</section>

	<br><br><br><br><br>
	<hr>
	<br><br><br><br><br>
	
	<!-- 판매자 정보 조회 -->
	<section class="ftco-section ftco-about ftco-no-pt img">
	 <div class="container">
	  <div class="row d-flex">
	   <div class="col-md-12 about-intro">
	    <div class="row">
	     <div class="col-md-6 d-flex align-items-stretch">
	      <div class="img d-flex w-100 align-items-center justify-content-center"><!-- 판매자 프사(mPhoto) -->
	      	<img class="image-thumbnail" th:src="${item_owner.mPhoto}"/>
	      </div>
	    </div>
	    <div class="col-md-6 pl-md-5 py-5">
	      <div class="row justify-content-start pb-3">
	        <div class="col-md-12 heading-section ftco-animate">
	         <span class="subheading">Saler</span>
	         <h2 class="mb-4" th:text="${item_owner.mNickname}"></h2>
	         <p th:text="${item_owner.mInfo}"></p>
	         <p><a href="#" class="btn btn-primary">[[${item_owner.mEmail}]]</a></p>
	       </div>
	     </div>
	   </div>
	 </div>
	</div>
	</div>
	</div>
	</section>
	
	<!-- 판매자와 거래 후기 -->
	<section class="ftco-section testimony-section bg-bottom" style="background-color: #b6d1d4">
			<div class="overlay"></div>
			<div class="container">
				<div class="row justify-content-center pb-4">
					<div
						class="col-md-7 text-center heading-section heading-section-white ftco-animate">
						<span class="subheading">Review</span>
						<h2 class="mb-4">borrower Feedback</h2>
					</div>
				</div>
				<div class="row ftco-animate">
					<div class="col-md-12">
						<div class="carousel-testimony owl-carousel">
							<div class="item" th:each="review:${item_review}">
								<div class="testimony-wrap py-4">
									<div class="text">
										<p class="star">
											<span class="fa fa-star" th:if="${review.rStar}>0" th:each="num: ${#numbers.sequence(1,review.rStar)}"></span>
										</p>
										<p class="mb-4" th:text="${review.rContent}"></p>
										<div class="d-flex align-items-center">
											<div class="user-img">
												<img class="image-thumbnail" th:src="${review.member.mPhoto}" />
											</div>
											<div class="pl-3">
												<p class="name">
													<a th:href="@{/memberpage/{mId}(mId=${review.member.mId})}" th:text="${review.member.mNickname}"></a>
												</p>
												<!-- 다른 사용자 마이페이지 -->
												<span class="position" th:text="${review.member.mId}"></span>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="pull-right" style="width: 100%; height: 5%; text-align: center;">
					<input type="button" style="margin-top:10px;" class="btn btn-secondary py-3 px-4" th:value="모두보기" id="showReview" data-toggle="modal" data-target="#reviewModal"> 
				</div>
			</div>
			<!-- Modal -->
			<div id="reviewModal" class="modal fade" role="dialog">
				<div class="modal-dialog modal-lg">
		    		<!-- Modal content-->
					<div class="modal-content">
						<div class="modal-header">
				        	<h4 class="modal-title">Review</h4>
				        	<button type="button" class="close" data-dismiss="modal">&times;</button>
				      	</div>
				      	<div class="modal-body">
				      		<div class="container">
				      			<h3 tabindex="-1" class="_14i3z6h">
				      				<span class="_1d35qey"><span style="color:red">★</span>[[${review_avg}]]점(후기 [[${item_review.size}]]개)</span>
				      			</h3>
								<div class="r1are2x1 dir dir-ltr" th:each="review:${item_review}">
									<div class="chnzxuf dir dir-ltr">
										<div class="_e7hn5" style="height: 56px; width: 56px;">
											<a target="_blank" aria-label="${review.member.mId}" th:href="@{/memberpage/{mId}(mId=${review.member.mId})}" class="_ghgl4l4">
												<div class="_1c81x67" style="height: 56px; width: 56px; border-radius: 50%;">
													<div class="_1h6n1zu" role="img" aria-busy="false" style="display: inline-block; vertical-align: bottom; height: 100%; width: 100%; min-height: 1px;">
														<img class="_9ofhsl" alt="no photo" th:src="${review.member.mPhoto}" style="object-fit: cover; vertical-align: bottom;">
													</div>
												</div>
											</a>
										</div>
										<div class="t9gtck5 dir dir-ltr">[[${review.member.mNickname}]]<div class="s11wgnhd dir dir-ltr"><div class="s189e1ab dir dir-ltr"><div>[[${#dates.format(new java.util.Date(item.iRegdate), 'yyyy년 MM월')}]]<span class="a8jt5op dir dir-ltr">, </span><span style="color: red;" class="fa fa-star" th:if="${review.rStar}>0" th:each="num: ${#numbers.sequence(1,review.rStar)}"></span></div></div></div></div>
									</div>
									<div><div style="line-height: 24px; color: black;"><span><span>[[${review.rContent}]]</span></span></div></div>
								</div>
				        	</div>
						</div>
						<div class="modal-footer">
							<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
						</div>
				    </div>
				</div>
			</div>
		</section>
	
	<section class="ftco-intro ftco-section ftco-no-pt">
	 <div class="container">
	  <div class="row justify-content-center">
	   <div class="col-md-12 text-center">
	    <div class="img">
			<div class="pull-right" style="width: 100%; height: 5%; padding: 0px 200px 0px 200px;">
				<a th:href="@{/item/itemlist}" class="btn btn-primary py-3 px-4">목록보기</a>
			</div>
	   </div>
	 </div>
	</div>
	</div>
	</section>
</div>
<th:block layout:fragment="script1">
	<script>
	// 상단 메뉴 쪽 이미지 부분
	let divisor = 3; 
	var myHeight = function() {
		$('.js-myheight').css('height', $(window).height()/divisor);
		$('.overlay').css('height', $(window).height()/divisor);
		$(window).resize(function() {
			$('.js-myheight').css('height', $(window).height()/divisor);
			$('.overlay').css('height', $(window).height()/divisor);
		});
	};
	myHeight();
	
	$(function(){
		var like_me = "[[${like_me}]]";
		
		$("#like_button").on("click", function(){
			$(this).toggleClass("liked");
			$.ajax({
				url:`updateGood/[[${member.mId}]]/[[${item.iId}]]`,
				type: "post",
				success: function(data){	
					$("#like_num").text(data);
				},
				error: function(){}
			});
		});
		
		if(like_me==1) {$("#like_button").toggleClass("liked"); like_me=0;}
	});
	</script>
</th:block>
</body>
</html>